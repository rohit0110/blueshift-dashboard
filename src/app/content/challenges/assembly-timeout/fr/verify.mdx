import { ChallengeTitle } from "../../../../components/Challenges/ChallengeTitle";
import { RequirementList } from "../../../../components/Challenges/RequirementList";
import { Requirement } from "../../../../components/Challenges/Requirement";

<ChallengeTitle>Délai d'expiration sBPF Assembly</ChallengeTitle>

Maintenant que vous devriez commencer à être à l'aise avec l'écriture en Assembly, au lieu d'utiliser le `sol_get_clock_sysvar`, essayez d'atteindre le même objectif en passant le compte `Clock`.

Créez un programme qui n'a qu'une seule instruction. Il doit :
- Prendre en compte le compte `Clock` (de taille 40).
- Prendre un slot u64 (8 octets) dans les données d'instruction.
- Utiliser les 8 premiers octets du compte `Clock` pour récupérer le slot actuel.
- Vérifier si le slot actuel est supérieur au slot passé dans l'instruction. Si c'est le cas, renvoyer le code d'erreur 1.

> Pour obtenir le bon décalage de données d'instruction, vous pouvez utiliser notre [outil](https://sbpf.xyz). N'oubliez pas d'ajouter un compte et de définir sa longueur de données à 40 ! 

Commencez par installer le package sBPF comme expliqué dans la [section outillage](/en/courses/introduction-to-assembly/tooling) du cours Introduction à l'Assembly et compilez votre programme en utilisant la commande suivante dans votre terminal :

```
sbpf build
```

Cela générera un fichier `.so` dans votre dossier `target/deploy`.

Maintenant, cliquez sur le bouton `take challenge` et déposez-y le fichier !

<RequirementList>
  <Requirement title="Défi 1 : Tester le délai d'expiration">
    Votre programme devrait réussir lorsqu'un slot supérieur au slot actuel est passé.
  </Requirement>

  <Requirement title="Défi 2 : Tester l'échec d'un délai d'expiration">
    Votre programme devrait échouer lorsqu'un slot inférieur au slot actuel est passé.
  </Requirement>
</RequirementList>